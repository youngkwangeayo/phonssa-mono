# ğŸ“± Phonssa AI ì œí’ˆ ì¶”ì²œ ì‹œìŠ¤í…œ - ì¢…í•© í”„ë¡œì íŠ¸ ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì„œë¹„ìŠ¤ ê¸°íš](#2-ì„œë¹„ìŠ¤-ê¸°íš)
3. [ìœ ì € ì‹œë‚˜ë¦¬ì˜¤](#3-ìœ ì €-ì‹œë‚˜ë¦¬ì˜¤)
4. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#4-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
5. [ê¸°ìˆ  ìŠ¤íƒ](#5-ê¸°ìˆ -ìŠ¤íƒ)
6. [ê°œë°œ ê³„íš](#6-ê°œë°œ-ê³„íš)
7. [ì¸í”„ë¼ êµ¬ì„±](#7-ì¸í”„ë¼-êµ¬ì„±)
8. [ê°œë°œ ë¬¸ì„œ](#8-ê°œë°œ-ë¬¸ì„œ)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ
AI ê¸°ë°˜ì˜ ìŠ¤ë§ˆíŠ¸í° ìš”ê¸ˆì œ/ì œí’ˆ ì¶”ì²œ ì‹œìŠ¤í…œìœ¼ë¡œ, ì‚¬ìš©ìì˜ ìì—°ì–´ ìš”ì²­ì„ ë¶„ì„í•˜ì—¬ ì‹¤ì œ ìš”ê¸ˆì œ/ê°€ë§¹ì  ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìµœì ì˜ ê¸°ê¸°ë¥¼ ì¶”ì²œí•˜ëŠ” ì„œë¹„ìŠ¤

### ğŸš€ í•µì‹¬ ê°€ì¹˜
- **ì§€ëŠ¥í˜• ì¶”ì²œ**: OpenAIì™€ ë²¡í„° ê²€ìƒ‰ì„ í™œìš©í•œ ì •í™•í•œ ì œí’ˆ ë§¤ì¹­
- **ì‹¤ì‹œê°„ ë°ì´í„°**: ì‹¤ì œ ë‹¨ê°€í‘œì™€ ìš”ê¸ˆì œ ì •ë³´ ê¸°ë°˜ ì¶”ì²œ
- **ì‚¬ìš©ì ì¹œí™”ì **: ìì—°ì–´ ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤
- **ê´€ë¦¬ íš¨ìœ¨ì„±**: ì—…ë¡œë“œ ìë™í™”ì™€ ë°ì´í„° ê´€ë¦¬ ê¸°ëŠ¥

### ğŸ“Š ì£¼ìš” ê¸°ëŠ¥
- AI ê¸°ë°˜ ì œí’ˆ/ìš”ê¸ˆì œ ì¶”ì²œ
- ë‹¤ì–‘í•œ í˜•íƒœì˜ ë‹¨ê°€í‘œ ì—…ë¡œë“œ ë° ìë™ ë¶„ì„
- ê´€ë¦¬ììš© ë°ì´í„° ê´€ë¦¬ ì¸í„°í˜ì´ìŠ¤
- ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ë°˜ ìƒë‹´

---

## 2. ì„œë¹„ìŠ¤ ê¸°íš

### ğŸ¨ UI/UX êµ¬ì„±

#### ë©”ì¸ í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            â”‚                                            â”‚
â”‚   â–· ìƒˆ ì±„íŒ…                 â”‚                                             â”‚
â”‚   â–· ì±„íŒ… ê¸°ë¡                â”‚    ----------------------------------     â”‚
â”‚   â–· í‘œ ë³´ê¸°                â”‚    ì‚¬ìš©ì: "70ë§Œì›ëŒ€ ì•„ì´í° ë³´ì—¬ì¤˜"       â”‚
â”‚                            â”‚    phonSsa: "iPhone 15, 5G ìš”ê¸ˆì œ ì¶”ì²œ..."    â”‚
â”‚                            â”‚                                            â”‚
â”‚                            â”‚    [ ğŸ§  AIê°€ ì‹¤ì œ ë‹¨ê°€í‘œ ê¸°ë°˜ ì¶”ì²œ ]      â”‚
â”‚                            â”‚                                            â”‚
â”‚                            â”‚      [ ë³´ì´ìŠ¤ ğŸ™ï¸  + â•  â¤ ] ì…ë ¥ì°½             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                            â”‚
â”‚   ğŸ‘¤ ìœ ì € í”„ë¡œí•„ (ì´ë¯¸ì§€)   â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ê´€ë¦¬ì í™”ë©´
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ ìƒí’ˆ ë‹¨ê°€í‘œ ê´€ë¦¬                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” í•„í„° ì˜µì…˜:                                              â”‚
â”‚  [ë¸Œëœë“œ â–¼] [ì¹´í…Œê³ ë¦¬ â–¼] [ê°€ê²©ëŒ€ â–¼] [ì¬ê³ ìƒíƒœ â–¼] [ğŸ” ê²€ìƒ‰] â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š ì´ 1,247ê°œ ìƒí’ˆ ì¤‘ 15ê°œ í‘œì‹œ                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ID  ìƒí’ˆëª…            ì •ê°€     í• ì¸ê°€   í• ì¸ìœ¨ ì¬ê³  ìƒíƒœ   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚001 iPhone 16 Pro 256GB 770,000 500,000  35%   25  í™œì„± â”‚ â”‚
â”‚  â”‚002 iPhone 16 128GB     650,000 420,000  35%   40  í™œì„± â”‚ â”‚
â”‚  â”‚003 Galaxy S25 256GB    620,000 480,000  23%   18  í™œì„± â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ íƒ€ê²Ÿ ì‚¬ìš©ì
- **ì¼ë°˜ ì‚¬ìš©ì**: ìŠ¤ë§ˆíŠ¸í° êµ¬ë§¤ë¥¼ ê³ ë ¤í•˜ëŠ” ì†Œë¹„ì
- **ê°€ë§¹ì  ì§ì›**: ê³ ê° ìƒë‹´ ì§€ì› ë„êµ¬ë¡œ í™œìš©
- **ê´€ë¦¬ì**: ë‹¨ê°€í‘œ ë° ìš”ê¸ˆì œ ë°ì´í„° ê´€ë¦¬

---

## 3. ìœ ì € ì‹œë‚˜ë¦¬ì˜¤

### ğŸ“± ì‹œë‚˜ë¦¬ì˜¤ 1: ì¼ë°˜ ì‚¬ìš©ì AI ì¶”ì²œ
**ëª©í‘œ**: ìì—°ì–´ ìš”ì²­ìœ¼ë¡œ ìµœì  ì œí’ˆ ì¶”ì²œ ë°›ê¸°

**íë¦„**:
1. ì‚¬ìš©ìê°€ ìì—°ì–´ë¡œ ìš”ì²­ ì…ë ¥
   - "70ë§Œì› ì •ë„ì˜ ì•„ì´í°ì„ ë³´ê³  ì‹¶ì–´ìš”"
   - "ìµœì‹  ì•„ì´í°ì„ ê°€ì¥ ì‹¸ê²Œ ì‚¬ê³  ì‹¶ì–´ìš”"
   - "ê³µì‹œì§€ì›ê¸ˆ ë†’ì€ ëª¨ë¸ ì¶”ì²œí•´ì¤˜"

2. AI ì²˜ë¦¬ ê³¼ì •
   - OpenAI Embeddingìœ¼ë¡œ ì¿¼ë¦¬ ë²¡í„°í™”
   - Qdrantì—ì„œ ì¡°ê±´ ìœ ì‚¬ ì œí’ˆ ê²€ìƒ‰
   - GPTê°€ ì¶”ì²œ ë¬¸ì¥ ìƒì„±

3. ì¶”ì²œ ê²°ê³¼ ì œê³µ
   > "77ë§Œì›ì˜ ìµœì‹  ì•„ì´í° 16 Proë¥¼  
   > 50ë§Œì› í• ì¸ëœ ê¸ˆì•¡ìœ¼ë¡œ êµ¬ë§¤ ê°€ëŠ¥í•˜ì„¸ìš”!  
   > Aí†µì‹ ì‚¬ì˜ 5G ìŠ¤í˜ì…œ ìš”ê¸ˆì œë¡œ ì¶”ì²œë“œë¦½ë‹ˆë‹¤."

### ğŸ“‚ ì‹œë‚˜ë¦¬ì˜¤ 2: ê´€ë¦¬ì ë‹¨ê°€í‘œ ì—…ë¡œë“œ
**ëª©í‘œ**: ë‹¤ì–‘í•œ í˜•íƒœì˜ ë‹¨ê°€í‘œ ìë™ ë¶„ì„ ë° DB ì €ì¥

**íë¦„**:
1. íŒŒì¼ ì—…ë¡œë“œ (`.jpg`, `.png`, `.txt`, `.xlsx`, `.csv`)
2. AI ìë™ ë¶„ì„
   - ì´ë¯¸ì§€: OCR ì²˜ë¦¬
   - í…ìŠ¤íŠ¸: ìì—°ì–´ íŒŒì‹±
   - ì—‘ì…€: ì…€ êµ¬ì¡° ê¸°ë°˜ ì •í˜•í™”
3. ì •ê·œí™”ëœ ë°ì´í„° MySQL ì €ì¥
4. ê´€ë¦¬ì ê²€ìˆ˜ ë° ìˆ˜ì • ê°€ëŠ¥

### ğŸ—‚ ì‹œë‚˜ë¦¬ì˜¤ 3: ê´€ë¦¬ì ë°ì´í„° í™•ì¸
**ëª©í‘œ**: ì—…ë¡œë“œëœ ë‹¨ê°€í‘œ í™•ì¸ ë° ê´€ë¦¬

**íë¦„**:
1. í‘œ í˜•íƒœë¡œ ë°ì´í„° ë Œë”ë§
2. í•„í„°ë§/ì •ë ¬/ê²€ìƒ‰ ê¸°ëŠ¥ í™œìš©
3. ë°ì´í„° ì§ì ‘ ìˆ˜ì • ê°€ëŠ¥
4. ë³€ê²½ ì´ë ¥ ë¡œê·¸ ì €ì¥

---

## 4. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜
```
[React Frontend]
        â†“ REST/WebSocket
[NestJS Backend API]
        â†“ â†˜
[MySQL RDBMS] [Redis Streams MQ]
        â†“
[FastAPI AI Server]
        â†“
[Qdrant Vector DB]
```

### ğŸ”„ ì„œë¹„ìŠ¤ ê°„ í†µì‹  íë¦„
1. **Frontend â†’ Backend**: REST API/WebSocket
2. **Backend â†’ AI Service**: Redis Streams (ë¹„ë™ê¸°)
3. **AI Service â†’ Vector DB**: ë²¡í„° ê²€ìƒ‰
4. **AI Service â†’ OpenAI**: ì„ë² ë”©/GPT ì²˜ë¦¬
5. **Backend â†” MySQL**: ì •í˜• ë°ì´í„° CRUD

### ğŸ“¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬ì„±

#### ğŸ–¥ï¸ Frontend Service (React)
**ì£¼ìš” ì—­í• :**
- ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì œê³µ
- ì±„íŒ… ê¸°ë°˜ ì œí’ˆ ì¶”ì²œ UI
- ê´€ë¦¬ì ë‹¨ê°€í‘œ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ
- ì‹¤ì‹œê°„ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ (Socket.io)
- íŒŒì¼ ì—…ë¡œë“œ UI
- ì¶”ì²œ ê²°ê³¼ ì‹œê°í™”

**í•µì‹¬ ê¸°ëŠ¥:**
- ì‚¬ìš©ì ì¸ì¦/ë¡œê·¸ì¸ UI
- ì±„íŒ… ë©”ì‹œì§€ ì…ë ¥/ì¶œë ¥
- ë‹¨ê°€í‘œ ì—…ë¡œë“œ ì¸í„°í˜ì´ìŠ¤
- ì œí’ˆ/ìš”ê¸ˆì œ ëª©ë¡ í‘œì‹œ
- í•„í„°ë§/ê²€ìƒ‰/ì •ë ¬ UI
- ê´€ë¦¬ì ë°ì´í„° CRUD ì¸í„°í˜ì´ìŠ¤

#### ğŸ› ï¸ Backend Service (NestJS)
**ì£¼ìš” ì—­í• :**
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬
- ì‚¬ìš©ì ì¸ì¦/ê¶Œí•œ ê´€ë¦¬
- ë°ì´í„°ë² ì´ìŠ¤ CRUD ì—°ì‚°
- AI ì„œë¹„ìŠ¤ì™€ì˜ í†µì‹  ì¤‘ì¬
- íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
- API Gateway ì—­í• 

**í•µì‹¬ ê¸°ëŠ¥:**
- JWT ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦
- ì œí’ˆ/ìš”ê¸ˆì œ/ê°€ë§¹ì  ë°ì´í„° ê´€ë¦¬
- ì±„íŒ… ì„¸ì…˜ ê´€ë¦¬
- Redis Streamsë¥¼ í†µí•œ AI ìš”ì²­ ì „ì†¡
- AI ê²°ê³¼ ìˆ˜ì‹  ë° DB ì €ì¥
- íŒŒì¼ ì—…ë¡œë“œ ë° ì „ì²˜ë¦¬
- RESTful API ì œê³µ
- WebSocket ì‹¤ì‹œê°„ í†µì‹ 

#### ğŸ¤– AI Service (FastAPI)
**ì£¼ìš” ì—­í• :**
- AI ê¸°ë°˜ ì œí’ˆ ì¶”ì²œ ì²˜ë¦¬
- ìì—°ì–´ ì²˜ë¦¬ ë° ë¶„ì„
- ë²¡í„° ê²€ìƒ‰ ë° ìœ ì‚¬ë„ ê³„ì‚°
- ë¬¸ì„œ/ì´ë¯¸ì§€ ìë™ ë¶„ì„
- OpenAI API í†µí•©

**í•µì‹¬ ê¸°ëŠ¥:**
- ì‚¬ìš©ì ì¿¼ë¦¬ ì„ë² ë”© ìƒì„± (OpenAI Embedding)
- Qdrant ë²¡í„° ê²€ìƒ‰ ìˆ˜í–‰
- GPT ê¸°ë°˜ ì¶”ì²œ ë¬¸ì¥ ìƒì„±
- OCRì„ í†µí•œ ì´ë¯¸ì§€ ë‹¨ê°€í‘œ ë¶„ì„
- ì—‘ì…€/CSV íŒŒì¼ ìë™ íŒŒì‹±
- í…ìŠ¤íŠ¸ ë°ì´í„° ì •ê·œí™”
- Redis Streams ë©”ì‹œì§€ ì²˜ë¦¬
- ì¶”ì²œ ê²°ê³¼ ì ìˆ˜ ê³„ì‚°

**ë°ì´í„° ë ˆì´ì–´:**
- **MySQL**: ì •í˜• ë°ì´í„° (ì œí’ˆ, ìš”ê¸ˆì œ, ì‚¬ìš©ì, ì±„íŒ… ì´ë ¥)
- **Qdrant**: ë²¡í„° ë°ì´í„° (ì œí’ˆ ì„ë² ë”©, ê²€ìƒ‰ ì¸ë±ìŠ¤)
- **Redis**: ë©”ì‹œì§€ í, ìºì‹œ, ì„¸ì…˜ ë°ì´í„°

---

## 5. ê¸°ìˆ  ìŠ¤íƒ

### ğŸ–¥ï¸ Frontend
- **Framework**: React 18+
- **State Management**: Context API / Redux Toolkit
- **Styling**: SCSS / Styled Components
- **HTTP Client**: Axios
- **Real-time**: Socket.io Client

### ğŸ› ï¸ Backend
- **Framework**: NestJS (Node.js + TypeScript)
- **Database ORM**: TypeORM
- **Authentication**: JWT
- **Validation**: Class Validator
- **Documentation**: Swagger

### ğŸ¤– AI Service
- **Framework**: FastAPI (Python)
- **AI/ML**: OpenAI API, Langchain
- **Vector Search**: Qdrant
- **Image Processing**: Tesseract OCR
- **Data Processing**: Pandas, NumPy

### ğŸ—„ï¸ Database & Infrastructure
- **RDBMS**: MySQL 8.0+
- **Vector DB**: Qdrant
- **Message Queue**: Redis Streams
- **Cache**: Redis
- **File Storage**: Local/AWS S3

### ğŸ”§ DevOps
- **Containerization**: Docker, Docker Compose
- **Process Manager**: PM2
- **Monitoring**: Prometheus + Grafana
- **Logging**: Winston + ELK Stack

---

## 6. ê°œë°œ ê³„íš

### ğŸ“… Phase 1: ê¸°ë³¸ ì¸í”„ë¼ êµ¬ì¶• (4ì£¼)
**Week 1-2: í™˜ê²½ ì„¤ì •**
- Docker í™˜ê²½ êµ¬ì„±
- NestJS ë°±ì—”ë“œ ê¸°ë³¸ êµ¬ì¡°
- React í”„ë¡ íŠ¸ì—”ë“œ ê¸°ë³¸ êµ¬ì¡°
- MySQL, Redis, Qdrant ì—°ë™

**Week 3-4: ê¸°ë³¸ ê¸°ëŠ¥**
- ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ
- ê¸°ë³¸ CRUD API
- íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥
- ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸

### ğŸ“… Phase 2: AI ê¸°ëŠ¥ ê°œë°œ (6ì£¼)
**Week 5-7: AI ì„œë¹„ìŠ¤ êµ¬ì¶•**
- FastAPI ì„œë²„ êµ¬ì¶•
- OpenAI API ì—°ë™
- ë²¡í„° ì„ë² ë”© ì²˜ë¦¬
- Qdrant ë²¡í„° ê²€ìƒ‰ êµ¬í˜„

**Week 8-10: ë°ì´í„° ì²˜ë¦¬**
- OCR ì—”ì§„ êµ¬í˜„
- ì—‘ì…€/CSV íŒŒì‹±
- ë°ì´í„° ì •ê·œí™” ë¡œì§
- ë‹¨ê°€í‘œ ìë™ ë¶„ì„

### ğŸ“… Phase 3: í†µí•© ë° ìµœì í™” (4ì£¼)
**Week 11-12: ì„œë¹„ìŠ¤ í†µí•©**
- Redis Streams ë©”ì‹œì§€ í êµ¬í˜„
- ë¹„ë™ê¸° AI ì²˜ë¦¬ íë¦„
- ì‹¤ì‹œê°„ ì±„íŒ… ê¸°ëŠ¥
- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ

**Week 13-14: ìµœì í™” ë° í…ŒìŠ¤íŠ¸**
- ì„±ëŠ¥ ìµœì í™”
- í†µí•© í…ŒìŠ¤íŠ¸
- ì‚¬ìš©ì í…ŒìŠ¤íŠ¸
- ë²„ê·¸ ìˆ˜ì • ë° ê°œì„ 

### ğŸ“… Phase 4: ë°°í¬ ë° ìš´ì˜ (2ì£¼)
**Week 15-16: ë°°í¬ ì¤€ë¹„**
- í”„ë¡œë•ì…˜ í™˜ê²½ êµ¬ì„±
- ëª¨ë‹ˆí„°ë§ ì„¤ì •
- ë³´ì•ˆ ê°•í™”
- ë¬¸ì„œí™” ì™„ë£Œ

---

## 7. ì¸í”„ë¼ êµ¬ì„±

### ğŸ³ Docker Compose êµ¬ì„±
```yaml
services:
  frontend:
    build: ./frontend
    ports: ["3000:3000"]
    
  backend:
    build: ./backend
    ports: ["3001:3001"]
    depends_on: [mysql, redis]
    
  ai-service:
    build: ./ai-service
    ports: ["8000:8000"]
    depends_on: [qdrant, redis]
    
  mysql:
    image: mysql:8.0
    ports: ["3306:3306"]
    volumes: ["mysql_data:/var/lib/mysql"]
    
  redis:
    image: redis:7-alpine
    ports: ["6379:6379"]
    
  qdrant:
    image: qdrant/qdrant
    ports: ["6333:6333"]
    volumes: ["qdrant_data:/qdrant/storage"]
```

### ğŸŒ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±
- **External Network**: Frontend â†” Users
- **Internal Network**: Backend â†” AI Service
- **Data Network**: Services â†” Databases

### ğŸ“Š ëª¨ë‹ˆí„°ë§ & ë¡œê¹…
- **ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë‹ˆí„°ë§**: Prometheus + Grafana
- **ë¡œê·¸ ìˆ˜ì§‘**: ELK Stack (Elasticsearch, Logstash, Kibana)
- **ì—ëŸ¬ ì¶”ì **: Sentry
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: New Relic / DataDog

---

## 8. ê°œë°œ ë¬¸ì„œ

### ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
phonssa/
â”œâ”€â”€ frontend/              # React ì•±
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ pages/         # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ hooks/         # ì»¤ìŠ¤í…€ í›…
â”‚   â”‚   â”œâ”€â”€ services/      # API ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ utils/         # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/               # NestJS API ì„œë²„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ modules/       # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/      # ì¸ì¦ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚   â”œâ”€â”€ products/  # ì œí’ˆ ê´€ë¦¬ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ products.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ products.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ products.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/      # ì±„íŒ…/ì¶”ì²œ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”‚   â””â”€â”€ upload/    # íŒŒì¼ ì—…ë¡œë“œ ëª¨ë“ˆ
â”‚   â”‚   â”‚       â”œâ”€â”€ upload.controller.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ upload.service.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ upload.module.ts
â”‚   â”‚   â”‚       â””â”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ entities/      # TypeORM ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ product.entity.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ plan.entity.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ user.entity.ts
â”‚   â”‚   â”‚   â””â”€â”€ chat-session.entity.ts
â”‚   â”‚   â”œâ”€â”€ common/        # ê³µí†µ ëª¨ë“ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ guards/    # ì¸ì¦/ì¸ê°€ ê°€ë“œ
â”‚   â”‚   â”‚   â”œâ”€â”€ interceptors/ # ì¸í„°ì…‰í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ filters/   # ì˜ˆì™¸ í•„í„°
â”‚   â”‚   â”‚   â””â”€â”€ decorators/ # ì»¤ìŠ¤í…€ ë°ì½”ë ˆì´í„°
â”‚   â”‚   â”œâ”€â”€ config/        # ì„¤ì •
â”‚   â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ redis.config.ts
â”‚   â”‚   â”‚   â””â”€â”€ app.config.ts
â”‚   â”‚   â”œâ”€â”€ main.ts        # ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”‚   â””â”€â”€ app.module.ts  # ë£¨íŠ¸ ëª¨ë“ˆ
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ai-service/            # FastAPI AI ì„œë²„
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py            # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚   â”‚   â”œâ”€â”€ core/              # í•µì‹¬ ì„¤ì •
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py      # ì„¤ì • ê´€ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py    # ë³´ì•ˆ/ì¸ì¦
â”‚   â”‚   â”‚   â””â”€â”€ database.py    # DB ì—°ê²° ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ api/               # API ë¼ìš°í„° (Controller ì—­í• )
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ deps.py        # ì˜ì¡´ì„± ì •ì˜
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚       â”œâ”€â”€ recommend.py      # ì¶”ì²œ API
â”‚   â”‚   â”‚       â”œâ”€â”€ analyze.py        # ë¬¸ì„œ ë¶„ì„ API
â”‚   â”‚   â”‚       â””â”€â”€ embeddings.py     # ì„ë² ë”© API
â”‚   â”‚   â”œâ”€â”€ schemas/           # Pydantic ìŠ¤í‚¤ë§ˆ (DTO ì—­í• )
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ recommend.py   # ì¶”ì²œ ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ analyze.py     # ë¶„ì„ ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ common.py      # ê³µí†µ ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ models/            # ë°ì´í„° ëª¨ë¸ (ORM/Entity)
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ product.py     # ì œí’ˆ ëª¨ë¸
â”‚   â”‚   â”‚   â””â”€â”€ embedding.py   # ì„ë² ë”© ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ services/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (Service ì—­í• )
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ recommend_service.py   # ì¶”ì²œ ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ embedding_service.py   # ì„ë² ë”© ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ ocr_service.py         # OCR ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â””â”€â”€ openai_service.py      # OpenAI API ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ repositories/      # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ (Repository/DAO)
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ vector_repository.py   # Qdrant ì ‘ê·¼
â”‚   â”‚   â”‚   â”œâ”€â”€ redis_repository.py    # Redis ì ‘ê·¼
â”‚   â”‚   â”‚   â””â”€â”€ base_repository.py     # ê¸°ë³¸ Repository
â”‚   â”‚   â”œâ”€â”€ utils/             # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ file_utils.py
â”‚   â”‚   â”‚   â”œâ”€â”€ text_processing.py
â”‚   â”‚   â”‚   â””â”€â”€ vector_utils.py
â”‚   â”‚   â””â”€â”€ middleware/        # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ cors.py
â”‚   â”‚       â”œâ”€â”€ logging.py
â”‚   â”‚       â””â”€â”€ error_handler.py
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ db/                    # ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨
â”‚   â”œâ”€â”€ migrations/        # ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ seeds/             # ì´ˆê¸° ë°ì´í„°
â”‚
â”œâ”€â”€ infra/                 # ì¸í”„ë¼ ì„¤ì •
â”‚   â”œâ”€â”€ docker/            # Docker ì„¤ì •
â”‚   â””â”€â”€ k8s/               # Kubernetes ì„¤ì •
â”‚
â””â”€â”€ docs/                  # ë¬¸ì„œ
    â”œâ”€â”€ api/               # API ë¬¸ì„œ
    â””â”€â”€ deployment/        # ë°°í¬ ê°€ì´ë“œ
```

### ğŸ”Œ API ì„¤ê³„

#### Backend API (NestJS)
```typescript
// products.controller.ts - Spring Boot @RestControllerì™€ ìœ ì‚¬
@Controller('api/products')
@UseGuards(JwtAuthGuard)
export class ProductsController {
  constructor(private readonly productsService: ProductsService) {}

  @Get()
  @ApiOperation({ summary: 'ì œí’ˆ ëª©ë¡ ì¡°íšŒ' })
  async getProducts(@Query() query: GetProductsDto) {
    return this.productsService.findAll(query);
  }

  @Post()
  @ApiOperation({ summary: 'ì œí’ˆ ìƒì„±' })
  async createProduct(@Body() createProductDto: CreateProductDto) {
    return this.productsService.create(createProductDto);
  }

  @Put(':id')
  async updateProduct(
    @Param('id') id: number,
    @Body() updateProductDto: UpdateProductDto
  ) {
    return this.productsService.update(id, updateProductDto);
  }
}

// products.service.ts - Spring Boot @Serviceì™€ ìœ ì‚¬
@Injectable()
export class ProductsService {
  constructor(
    @InjectRepository(Product)
    private readonly productRepository: Repository<Product>,
    private readonly redisService: RedisService
  ) {}

  async findAll(query: GetProductsDto): Promise<Product[]> {
    const queryBuilder = this.productRepository.createQueryBuilder('product');
    
    if (query.brand) {
      queryBuilder.andWhere('product.brand = :brand', { brand: query.brand });
    }
    
    if (query.priceRange) {
      const [min, max] = query.priceRange.split('-').map(Number);
      queryBuilder.andWhere('product.price BETWEEN :min AND :max', { min, max });
    }
    
    return queryBuilder.getMany();
  }

  async create(createProductDto: CreateProductDto): Promise<Product> {
    const product = this.productRepository.create(createProductDto);
    return this.productRepository.save(product);
  }
}

// chat.controller.ts - AI ì¶”ì²œ ìš”ì²­ ì²˜ë¦¬
@Controller('api/chat')
export class ChatController {
  constructor(private readonly chatService: ChatService) {}

  @Post('recommend')
  async getRecommendation(@Body() chatDto: ChatRequestDto) {
    return this.chatService.processRecommendation(chatDto);
  }
}

// chat.service.ts - Redisë¥¼ í†µí•œ AI ì„œë¹„ìŠ¤ í†µì‹ 
@Injectable()
export class ChatService {
  constructor(
    private readonly redisService: RedisService,
    @InjectRepository(ChatSession)
    private readonly chatRepository: Repository<ChatSession>
  ) {}

  async processRecommendation(chatDto: ChatRequestDto) {
    // 1. ì±„íŒ… ì„¸ì…˜ ì €ì¥
    const session = await this.saveChatSession(chatDto);
    
    // 2. Redis Streamsë¡œ AI ì„œë¹„ìŠ¤ì— ìš”ì²­ ì „ì†¡
    await this.redisService.xadd('ai-requests', '*', {
      sessionId: session.id,
      message: chatDto.message,
      userId: chatDto.userId
    });
    
    // 3. ë¹„ë™ê¸° ì‘ë‹µ ëŒ€ê¸° (WebSocketìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬)
    return { sessionId: session.id, status: 'processing' };
  }
}
```

#### AI Service API (FastAPI)
```python
#### AI Service API (FastAPI)
```python
# main.py - FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from app.api.v1 import recommend, analyze
from app.core.config import settings

app = FastAPI(title="Phonssa AI Service", version="1.0.0")

app.add_middleware(CORSMiddleware, allow_origins=["*"])
app.include_router(recommend.router, prefix="/api/v1")
app.include_router(analyze.router, prefix="/api/v1")

# api/v1/recommend.py - ë¼ìš°í„° (Controller ì—­í• )
from fastapi import APIRouter, Depends, HTTPException
from app.schemas.recommend import RecommendRequest, RecommendResponse
from app.services.recommend_service import RecommendService
from app.api.deps import get_recommend_service

router = APIRouter(prefix="/recommend", tags=["recommend"])

@router.post("/", response_model=RecommendResponse)
async def create_recommendation(
    request: RecommendRequest,
    service: RecommendService = Depends(get_recommend_service)
):
    """ì œí’ˆ ì¶”ì²œ API"""
    try:
        result = await service.process_recommendation(request)
        return result
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

# schemas/recommend.py - Pydantic ìŠ¤í‚¤ë§ˆ (DTO ì—­í• )
from pydantic import BaseModel, Field
from typing import List, Optional

class RecommendRequest(BaseModel):
    query: str = Field(..., description="ì‚¬ìš©ì ì¶”ì²œ ìš”ì²­")
    user_id: Optional[str] = Field(None, description="ì‚¬ìš©ì ID")
    context: Optional[dict] = Field(None, description="ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸")

class ProductRecommendation(BaseModel):
    product_id: int
    name: str
    price: float
    discount_price: Optional[float]
    similarity_score: float
    reason: str

class RecommendResponse(BaseModel):
    recommendations: List[ProductRecommendation]
    response_text: str
    processing_time: float

# services/recommend_service.py - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (Service ì—­í• )
from app.repositories.vector_repository import VectorRepository
from app.repositories.redis_repository import RedisRepository
from app.services.openai_service import OpenAIService
from app.services.embedding_service import EmbeddingService

class RecommendService:
    def __init__(
        self,
        vector_repo: VectorRepository,
        redis_repo: RedisRepository,
        openai_service: OpenAIService,
        embedding_service: EmbeddingService
    ):
        self.vector_repo = vector_repo
        self.redis_repo = redis_repo
        self.openai_service = openai_service
        self.embedding_service = embedding_service

    async def process_recommendation(self, request: RecommendRequest) -> RecommendResponse:
        # 1. ì‚¬ìš©ì ì¿¼ë¦¬ë¥¼ ë²¡í„°ë¡œ ë³€í™˜
        query_embedding = await self.embedding_service.create_embedding(request.query)
        
        # 2. Qdrantì—ì„œ ìœ ì‚¬í•œ ì œí’ˆ ê²€ìƒ‰
        similar_products = await self.vector_repo.search_similar_products(
            query_embedding, limit=10
        )
        
        # 3. GPTë¡œ ì¶”ì²œ í…ìŠ¤íŠ¸ ìƒì„±
        response_text = await self.openai_service.generate_recommendation_text(
            request.query, similar_products
        )
        
        # 4. ê²°ê³¼ ë°˜í™˜
        return RecommendResponse(
            recommendations=similar_products,
            response_text=response_text,
            processing_time=0.5
        )

# repositories/vector_repository.py - ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ (Repository ì—­í• )
from qdrant_client import QdrantClient
from qdrant_client.models import SearchRequest
from typing import List
from app.schemas.recommend import ProductRecommendation

class VectorRepository:
    def __init__(self, qdrant_client: QdrantClient):
        self.client = qdrant_client
        self.collection_name = "products"

    async def search_similar_products(
        self, 
        query_vector: List[float], 
        limit: int = 10
    ) -> List[ProductRecommendation]:
        """ë²¡í„° ìœ ì‚¬ë„ ê¸°ë°˜ ì œí’ˆ ê²€ìƒ‰"""
        search_result = self.client.search(
            collection_name=self.collection_name,
            query_vector=query_vector,
            limit=limit,
            with_payload=True
        )
        
        recommendations = []
        for result in search_result:
            recommendations.append(ProductRecommendation(
                product_id=result.payload["product_id"],
                name=result.payload["name"],
                price=result.payload["price"],
                discount_price=result.payload.get("discount_price"),
                similarity_score=result.score,
                reason=result.payload.get("description", "")
            ))
        
        return recommendations

# repositories/redis_repository.py - Redis ì ‘ê·¼
import redis.asyncio as redis
from typing import Dict, Any

class RedisRepository:
    def __init__(self, redis_client: redis.Redis):
        self.client = redis_client

    async def process_message_queue(self, stream_name: str) -> Dict[str, Any]:
        """Redis Streams ë©”ì‹œì§€ ì²˜ë¦¬"""
        messages = await self.client.xread({stream_name: '
```

### ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

#### MySQL ì£¼ìš” í…Œì´ë¸”
```sql
-- db/mysql/ddl/002_create_products.sql
CREATE TABLE products (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL COMMENT 'ì œí’ˆëª…',
  brand VARCHAR(100) NOT NULL COMMENT 'ë¸Œëœë“œ',
  model VARCHAR(100) NOT NULL COMMENT 'ëª¨ë¸ëª…',
  category VARCHAR(50) NOT NULL COMMENT 'ì¹´í…Œê³ ë¦¬',
  price DECIMAL(10,2) NOT NULL COMMENT 'ì •ê°€',
  discount_price DECIMAL(10,2) COMMENT 'í• ì¸ê°€',
  discount_rate DECIMAL(5,2) COMMENT 'í• ì¸ìœ¨',
  stock_quantity INT DEFAULT 0 COMMENT 'ì¬ê³ ìˆ˜ëŸ‰',
  status ENUM('active', 'inactive', 'out_of_stock') DEFAULT 'active',
  store_id INT COMMENT 'ê°€ë§¹ì  ID',
  specs JSON COMMENT 'ì œí’ˆ ìŠ¤í™ ì •ë³´',
  vector_id VARCHAR(100) COMMENT 'Qdrant ë²¡í„° ID ì°¸ì¡°',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_brand_category (brand, category),
  INDEX idx_price_range (price, discount_price),
  INDEX idx_status (status),
  INDEX idx_vector_id (vector_id)
) COMMENT='ì œí’ˆ ì •ë³´ í…Œì´ë¸”';

-- db/mysql/ddl/003_create_plans.sql
CREATE TABLE plans (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL COMMENT 'ìš”ê¸ˆì œëª…',
  carrier VARCHAR(100) NOT NULL COMMENT 'í†µì‹ ì‚¬',
  plan_type VARCHAR(50) NOT NULL COMMENT 'ìš”ê¸ˆì œ ìœ í˜•',
  monthly_fee DECIMAL(10,2) NOT NULL COMMENT 'ì›” ìš”ê¸ˆ',
  data_limit VARCHAR(50) COMMENT 'ë°ì´í„° í•œë„',
  voice_minutes INT COMMENT 'ìŒì„±í†µí™” ë¶„',
  sms_count INT COMMENT 'SMS ê°œìˆ˜',
  support_subsidy DECIMAL(10,2) COMMENT 'ì§€ì›ê¸ˆ',
  conditions JSON COMMENT 'ê°€ì… ì¡°ê±´',
  vector_id VARCHAR(100) COMMENT 'Qdrant ë²¡í„° ID ì°¸ì¡°',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_carrier (carrier),
  INDEX idx_monthly_fee (monthly_fee),
  INDEX idx_vector_id (vector_id)
) COMMENT='ìš”ê¸ˆì œ ì •ë³´ í…Œì´ë¸”';

-- db/mysql/ddl/004_create_chat_sessions.sql
CREATE TABLE chat_sessions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  session_uuid VARCHAR(36) NOT NULL UNIQUE COMMENT 'ì„¸ì…˜ ê³ ìœ  ID',
  user_id VARCHAR(100) COMMENT 'ì‚¬ìš©ì ID',
  message TEXT NOT NULL COMMENT 'ì‚¬ìš©ì ë©”ì‹œì§€',
  response TEXT COMMENT 'AI ì‘ë‹µ',
  intent VARCHAR(100) COMMENT 'ì˜ë„ ë¶„ì„ ê²°ê³¼',
  extracted_conditions JSON COMMENT 'ì¶”ì¶œëœ ì¡°ê±´ë“¤',
  recommended_products JSON COMMENT 'ì¶”ì²œëœ ì œí’ˆ ëª©ë¡',
  similarity_scores JSON COMMENT 'ìœ ì‚¬ë„ ì ìˆ˜',
  processing_time DECIMAL(6,3) COMMENT 'ì²˜ë¦¬ ì‹œê°„(ì´ˆ)',
  status ENUM('pending', 'processing', 'completed', 'failed') DEFAULT 'pending',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_user_id (user_id),
  INDEX idx_status (status),
  INDEX idx_created_at (created_at)
) COMMENT='ì±„íŒ… ì„¸ì…˜ í…Œì´ë¸”';

-- db/mysql/procedures/sp_product_search.sql
DELIMITER //
CREATE PROCEDURE sp_product_search(
  IN p_brand VARCHAR(100),
  IN p_min_price DECIMAL(10,2),
  IN p_max_price DECIMAL(10,2),
  IN p_category VARCHAR(50),
  IN p_limit INT
)
BEGIN
  DECLARE v_sql TEXT;
  
  SET v_sql = 'SELECT 
    p.id, p.name, p.brand, p.model, p.price, p.discount_price,
    (p.price - IFNULL(p.discount_price, p.price)) AS discount_amount,
    p.stock_quantity, p.status
  FROM products p WHERE 1=1';
  
  IF p_brand IS NOT NULL THEN
    SET v_sql = CONCAT(v_sql, ' AND p.brand = ''', p_brand, '''');
  END IF;
  
  IF p_min_price IS NOT NULL THEN
    SET v_sql = CONCAT(v_sql, ' AND IFNULL(p.discount_price, p.price) >= ', p_min_price);
  END IF;
  
  IF p_max_price IS NOT NULL THEN
    SET v_sql = CONCAT(v_sql, ' AND IFNULL(p.discount_price, p.price) <= ', p_max_price);
  END IF;
  
  IF p_category IS NOT NULL THEN
    SET v_sql = CONCAT(v_sql, ' AND p.category = ''', p_category, '''');
  END IF;
  
  SET v_sql = CONCAT(v_sql, ' AND p.status = ''active'' ORDER BY p.discount_rate DESC');
  
  IF p_limit IS NOT NULL THEN
    SET v_sql = CONCAT(v_sql, ' LIMIT ', p_limit);
  END IF;
  
  SET @sql = v_sql;
  PREPARE stmt FROM @sql;
  EXECUTE stmt;
  DEALLOCATE PREPARE stmt;
END //
DELIMITER ;
```

#### Qdrant ë²¡í„° DB ì„¤ì •
```python
# db/qdrant/collections/products_collection.py
from qdrant_client import QdrantClient
from qdrant_client.models import Distance, VectorParams, CreateCollection

class ProductsCollectionManager:
    def __init__(self, client: QdrantClient):
        self.client = client
        self.collection_name = "products"
    
    def create_collection(self):
        """ì œí’ˆ ì»¬ë ‰ì…˜ ìƒì„±"""
        collection_config = CreateCollection(
            collection_name=self.collection_name,
            vectors_config=VectorParams(
                size=1536,  # OpenAI embedding ì°¨ì›
                distance=Distance.COSINE
            )
        )
        self.client.create_collection(collection_config)
    
    def create_payload_index(self):
        """í˜ì´ë¡œë“œ ì¸ë±ìŠ¤ ìƒì„± (í•„í„°ë§ ì„±ëŠ¥ í–¥ìƒ)"""
        # ë¸Œëœë“œ ì¸ë±ìŠ¤
        self.client.create_payload_index(
            collection_name=self.collection_name,
            field_name="brand",
            field_schema="keyword"
        )
        
        # ê°€ê²© ë²”ìœ„ ì¸ë±ìŠ¤
        self.client.create_payload_index(
            collection_name=self.collection_name,
            field_name="price",
            field_schema="float"
        )
        
        # ì¹´í…Œê³ ë¦¬ ì¸ë±ìŠ¤
        self.client.create_payload_index(
            collection_name=self.collection_name,
            field_name="category",
            field_schema="keyword"
        )

# db/qdrant/schemas/product_schema.json
{
  "collection_name": "products",
  "vector_config": {
    "size": 1536,
    "distance": "Cosine"
  },
  "payload_schema": {
    "product_id": "integer",
    "name": "text",
    "brand": "keyword",
    "category": "keyword", 
    "price": "float",
    "discount_price": "float",
    "description": "text",
    "specs": "text",
    "store_id": "integer",
    "embedding_text": "text",
    "created_at": "datetime"
  },
  "indexes": [
    {"field": "brand", "type": "keyword"},
    {"field": "category", "type": "keyword"},
    {"field": "price", "type": "float"},
    {"field": "store_id", "type": "integer"}
  ]
}

# db/qdrant/init/create_collections.py
"""Qdrant ì»¬ë ‰ì…˜ ì´ˆê¸° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸"""
from qdrant_client import QdrantClient
from qdrant_client.models import Distance, VectorParams, CreateCollection
import json
import os

def create_all_collections():
    client = QdrantClient(host="localhost", port=6333)
    
    # ì œí’ˆ ì»¬ë ‰ì…˜
    products_collection = CreateCollection(
        collection_name="products",
        vectors_config=VectorParams(size=1536, distance=Distance.COSINE)
    )
    client.create_collection(products_collection)
    
    # ìš”ê¸ˆì œ ì»¬ë ‰ì…˜
    plans_collection = CreateCollection(
        collection_name="plans", 
        vectors_config=VectorParams(size=1536, distance=Distance.COSINE)
    )
    client.create_collection(plans_collection)
    
    # ì‚¬ìš©ì ì„ í˜¸ë„ ì»¬ë ‰ì…˜
    preferences_collection = CreateCollection(
        collection_name="user_preferences",
        vectors_config=VectorParams(size=1536, distance=Distance.COSINE)
    )
    client.create_collection(preferences_collection)
    
    print("All collections created successfully!")

# db/qdrant/queries/product_similarity.py
"""ì œí’ˆ ìœ ì‚¬ë„ ê²€ìƒ‰ ì¿¼ë¦¬"""
from qdrant_client import QdrantClient
from qdrant_client.models import Filter, FieldCondition, Range, MatchValue
from typing import List, Dict, Any, Optional

class ProductSimilaritySearch:
    def __init__(self, client: QdrantClient):
        self.client = client
        self.collection_name = "products"
    
    def search_similar_products(
        self,
        query_vector: List[float],
        brand_filter: Optional[str] = None,
        price_range: Optional[tuple] = None,
        category_filter: Optional[str] = None,
        limit: int = 10
    ) -> List[Dict[str, Any]]:
        """ì¡°ê±´ë¶€ ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰"""
        
        # í•„í„° ì¡°ê±´ êµ¬ì„±
        filters = []
        
        if brand_filter:
            filters.append(
                FieldCondition(key="brand", match=MatchValue(value=brand_filter))
            )
        
        if price_range:
            min_price, max_price = price_range
            filters.append(
                FieldCondition(
                    key="price", 
                    range=Range(gte=min_price, lte=max_price)
                )
            )
        
        if category_filter:
            filters.append(
                FieldCondition(key="category", match=MatchValue(value=category_filter))
            )
        
        # ê²€ìƒ‰ ì‹¤í–‰
        search_result = self.client.search(
            collection_name=self.collection_name,
            query_vector=query_vector,
            query_filter=Filter(must=filters) if filters else None,
            limit=limit,
            with_payload=True,
            with_vectors=False
        )
        
        return [
            {
                "id": point.id,
                "score": point.score,
                "payload": point.payload
            }
            for point in search_result
        ]
```

### ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
- **ì¸ì¦**: JWT í† í° ê¸°ë°˜ ì¸ì¦
- **ê¶Œí•œ**: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)
- **API ë³´ì•ˆ**: Rate Limiting, CORS ì„¤ì •
- **ë°ì´í„° ë³´ì•ˆ**: ë¯¼ê° ì •ë³´ ì•”í˜¸í™”
- **íŒŒì¼ ì—…ë¡œë“œ**: íŒŒì¼ íƒ€ì… ê²€ì¦, í¬ê¸° ì œí•œ

### ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ
- **Unit Test**: Jest (Backend), Pytest (AI Service)
- **Integration Test**: Supertest, TestContainers
- **E2E Test**: Cypress, Playwright
- **Load Test**: Artillery, K6
- **Security Test**: OWASP ZAP

---

## ğŸ“ ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### ğŸš€ ì„±ëŠ¥ ìµœì í™”
- Redis ìºì‹± ì „ëµ
- ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±
- CDN í™œìš© (ì •ì  íŒŒì¼)
- ì´ë¯¸ì§€ ìµœì í™”

### ğŸ“ˆ í™•ì¥ì„± ê³„íš
- ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì ìš©
- ë¡œë“œ ë°¸ëŸ°ì‹±
- ë°ì´í„°ë² ì´ìŠ¤ ìƒ¤ë”©
- Kafka ë„ì… (ëŒ€ìš©ëŸ‰ ë©”ì‹œì§€ ì²˜ë¦¬)

### ğŸ”„ ìš´ì˜ ê³„íš
- CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
- ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ êµ¬ì„±
- ì¥ì•  ëŒ€ì‘ í”„ë¡œì„¸ìŠ¤
- ë°±ì—… ë° ë³µêµ¬ ì „ëµ

---

*ì´ ë¬¸ì„œëŠ” Phonssa AI ì œí’ˆ ì¶”ì²œ ì‹œìŠ¤í…œì˜ ì „ì²´ì ì¸ ì„¤ê³„ì™€ ê°œë°œ ê³„íšì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì§„í–‰ì— ë”°ë¼ ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë  ì˜ˆì •ì…ë‹ˆë‹¤.*}, count=1, block=1000)
        return messages

    async def send_response(self, stream_name: str, data: Dict[str, Any]):
        """ì‘ë‹µ ë©”ì‹œì§€ ì „ì†¡"""
        await self.client.xadd(stream_name, data)

# api/deps.py - ì˜ì¡´ì„± ì£¼ì… (Springì˜ @Autowired ì—­í• )
from fastapi import Depends
from app.services.recommend_service import RecommendService
from app.repositories.vector_repository import VectorRepository
from app.repositories.redis_repository import RedisRepository
from app.core.database import get_qdrant_client, get_redis_client

def get_vector_repository(
    qdrant_client=Depends(get_qdrant_client)
) -> VectorRepository:
    return VectorRepository(qdrant_client)

def get_redis_repository(
    redis_client=Depends(get_redis_client)
) -> RedisRepository:
    return RedisRepository(redis_client)

def get_recommend_service(
    vector_repo: VectorRepository = Depends(get_vector_repository),
    redis_repo: RedisRepository = Depends(get_redis_repository)
) -> RecommendService:
    return RecommendService(vector_repo, redis_repo)
```
```

### ğŸ—ƒï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

#### MySQL ì£¼ìš” í…Œì´ë¸”
```sql
-- ì œí’ˆ ì •ë³´
CREATE TABLE products (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  brand VARCHAR(100),
  model VARCHAR(100),
  price DECIMAL(10,2),
  discount_price DECIMAL(10,2),
  stock_quantity INT,
  status ENUM('active', 'inactive', 'out_of_stock'),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ìš”ê¸ˆì œ ì •ë³´
CREATE TABLE plans (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  carrier VARCHAR(100),
  monthly_fee DECIMAL(10,2),
  data_limit VARCHAR(50),
  voice_minutes INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ì‚¬ìš©ì ì±„íŒ… ì´ë ¥
CREATE TABLE chat_sessions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(100),
  message TEXT,
  response TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
- **ì¸ì¦**: JWT í† í° ê¸°ë°˜ ì¸ì¦
- **ê¶Œí•œ**: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)
- **API ë³´ì•ˆ**: Rate Limiting, CORS ì„¤ì •
- **ë°ì´í„° ë³´ì•ˆ**: ë¯¼ê° ì •ë³´ ì•”í˜¸í™”
- **íŒŒì¼ ì—…ë¡œë“œ**: íŒŒì¼ íƒ€ì… ê²€ì¦, í¬ê¸° ì œí•œ

### ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ
- **Unit Test**: Jest (Backend), Pytest (AI Service)
- **Integration Test**: Supertest, TestContainers
- **E2E Test**: Cypress, Playwright
- **Load Test**: Artillery, K6
- **Security Test**: OWASP ZAP

---

## ğŸ“ ì¶”ê°€ ê³ ë ¤ì‚¬í•­

### ğŸš€ ì„±ëŠ¥ ìµœì í™”
- Redis ìºì‹± ì „ëµ
- ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±
- CDN í™œìš© (ì •ì  íŒŒì¼)
- ì´ë¯¸ì§€ ìµœì í™”

### ğŸ“ˆ í™•ì¥ì„± ê³„íš
- ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ì ìš©
- ë¡œë“œ ë°¸ëŸ°ì‹±
- ë°ì´í„°ë² ì´ìŠ¤ ìƒ¤ë”©
- Kafka ë„ì… (ëŒ€ìš©ëŸ‰ ë©”ì‹œì§€ ì²˜ë¦¬)

### ğŸ”„ ìš´ì˜ ê³„íš
- CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
- ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ êµ¬ì„±
- ì¥ì•  ëŒ€ì‘ í”„ë¡œì„¸ìŠ¤
- ë°±ì—… ë° ë³µêµ¬ ì „ëµ

---

*ì´ ë¬¸ì„œëŠ” Phonssa AI ì œí’ˆ ì¶”ì²œ ì‹œìŠ¤í…œì˜ ì „ì²´ì ì¸ ì„¤ê³„ì™€ ê°œë°œ ê³„íšì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì§„í–‰ì— ë”°ë¼ ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë  ì˜ˆì •ì…ë‹ˆë‹¤.*

## ğŸ“‹ ë¬¸ì„œ ê´€ë¦¬ ë° ê°œë°œ ì§„í–‰ ì „ëµ

### ğŸ—‚ï¸ í”„ë¡œì íŠ¸ ë¬¸ì„œí™” ì²´ê³„

ë³¸ í”„ë¡œì íŠ¸ëŠ” ì„œë²„ë³„/ì˜ì—­ë³„ë¡œ ì„¸ë¶„í™”ëœ ë¬¸ì„œ ê´€ë¦¬ ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```
md-files/
â”œâ”€â”€ PROJECT.md              # ğŸ“– í”„ë¡œì íŠ¸ ì „ì²´ ê°œìš” ë° ì„¤ê³„ (í˜„ì¬ íŒŒì¼)
â”œâ”€â”€ CLAUDE.md               # ğŸ¤– Claude AI ì‘ì—… ë‚´ì—­ ì´ê´„ ê´€ë¦¬
â”œâ”€â”€ CLAUDE.FRONTEND.md      # ğŸ–¥ï¸ Frontend ê°œë°œ ì‘ì—… ë‚´ì—­
â”œâ”€â”€ CLAUDE.BACKEND.md       # ğŸ› ï¸ Backend ê°œë°œ ì‘ì—… ë‚´ì—­ (ì˜ˆì •)
â”œâ”€â”€ CLAUDE.AI-SERVICE.md    # ğŸ§  AI Service ê°œë°œ ì‘ì—… ë‚´ì—­ (ì˜ˆì •)
â”œâ”€â”€ CLAUDE.DATABASE.md      # ğŸ—„ï¸ Database ì„¤ì • ë° ê´€ë¦¬ ì‘ì—… ë‚´ì—­ (ì˜ˆì •)
â”œâ”€â”€ CLAUDE.INFRA.md         # ğŸš€ Infrastructure ë° DevOps ì‘ì—… ë‚´ì—­ (ì˜ˆì •)
â””â”€â”€ [ê¸°íƒ€ ì‹œë‚˜ë¦¬ì˜¤ ë° ê¸°ìˆ  ë¬¸ì„œë“¤]
```

### ğŸ“ ë¬¸ì„œë³„ ê´€ë¦¬ ì›ì¹™

#### PROJECT.md (í˜„ì¬ íŒŒì¼)
- **ëª©ì **: í”„ë¡œì íŠ¸ ì „ì²´ ì•„í‚¤í…ì²˜ì™€ ì„¤ê³„ ì›ì¹™ ì •ì˜
- **ë‚´ìš©**: ì‹œìŠ¤í…œ ê°œìš”, ê¸°ìˆ  ìŠ¤íƒ, ì•„í‚¤í…ì²˜, ê°œë°œ ê³„íš
- **ì—…ë°ì´íŠ¸**: ì£¼ìš” ì•„í‚¤í…ì²˜ ë³€ê²½ì´ë‚˜ ê¸°ìˆ  ìŠ¤íƒ ë³€ê²½ ì‹œ
- **ê´€ë¦¬**: í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €/ì•„í‚¤í…íŠ¸ ë ˆë²¨

#### CLAUDE.*.md ì‹œë¦¬ì¦ˆ
- **ëª©ì **: ì‹¤ì œ ê°œë°œ ì‘ì—… ë‚´ì—­ê³¼ ë¬¸ì œ í•´ê²° ê³¼ì • ê¸°ë¡
- **ë‚´ìš©**: êµ¬í˜„ ì„¸ë¶€ì‚¬í•­, ë°œìƒí•œ ë¬¸ì œì™€ í•´ê²°ì±…, í…ŒìŠ¤íŠ¸ ê²°ê³¼
- **ì—…ë°ì´íŠ¸**: í•´ë‹¹ ì˜ì—­ ì‘ì—… ìˆ˜í–‰ ì‹œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- **ê´€ë¦¬**: Claude AI + ê°œë°œì í˜‘ì—…

### ğŸ”„ ê°œë°œ ì§„í–‰ ë°©ì‹

#### Phase-based ê°œë°œ
1. **Phase 1**: Frontend êµ¬í˜„ ë° ì•ˆì •í™” âœ…
2. **Phase 2**: Backend API ì„œë²„ êµ¬í˜„ ğŸš§
3. **Phase 3**: AI Service êµ¬í˜„ ğŸš§
4. **Phase 4**: Database ì„¤ê³„ ë° êµ¬ì¶• ğŸš§
5. **Phase 5**: Infrastructure ë° ë°°í¬ ğŸš§

#### ë¬¸ì„œ ì—°ë™ ì›ì¹™
- ê° Phase ì‹œì‘ ì‹œ í•´ë‹¹ CLAUDE.*.md íŒŒì¼ ìƒì„±
- ì‘ì—… ì§„í–‰ ì¤‘ ì‹¤ì‹œê°„ ë¬¸ì œ í•´ê²° ê³¼ì • ê¸°ë¡
- Phase ì™„ë£Œ ì‹œ PROJECT.mdì— ê²°ê³¼ ë°˜ì˜
- ì„œë²„ ê°„ ì—°ë™ ì‘ì—… ì‹œ ê´€ë ¨ ë¬¸ì„œë“¤ì— ìƒí˜¸ ì°¸ì¡°

### ğŸ“ˆ í”„ë¡œì íŠ¸ í˜„ì¬ ìƒíƒœ

#### âœ… ì™„ë£Œëœ ì˜ì—­
- **Frontend (React)**: ì´ˆê¸° êµ¬í˜„ ì™„ë£Œ, ì •ìƒ ì‘ë™ í™•ì¸
  - ìƒì„¸ ë‚´ì—­: [CLAUDE.FRONTEND.md](./CLAUDE.FRONTEND.md)

#### ğŸš§ ì§„í–‰ ì˜ˆì • ì˜ì—­
- **Backend (NestJS)**: API ì„œë²„ êµ¬í˜„ ì˜ˆì •
- **AI Service (FastAPI)**: ì¶”ì²œ ì—”ì§„ êµ¬í˜„ ì˜ˆì •  
- **Database**: MySQL, Qdrant, Redis êµ¬ì„± ì˜ˆì •
- **Infrastructure**: Docker, CI/CD êµ¬ì„± ì˜ˆì •

### ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ ê³„íš

1. **Backend ê°œë°œ ì‹œì‘**
   - NestJS í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
   - ê¸°ë³¸ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
   - CLAUDE.BACKEND.md ë¬¸ì„œ ìƒì„±

2. **Database ì„¤ê³„**
   - MySQL ìŠ¤í‚¤ë§ˆ ì„¤ê³„
   - Qdrant ë²¡í„° DB ì„¤ì •
   - CLAUDE.DATABASE.md ë¬¸ì„œ ìƒì„±

3. **AI Service êµ¬í˜„**
   - FastAPI ê¸°ë°˜ ì¶”ì²œ ì—”ì§„
   - OpenAI API ì—°ë™
   - CLAUDE.AI-SERVICE.md ë¬¸ì„œ ìƒì„±

*ìµœì¢… ì—…ë°ì´íŠ¸: 2025-07-31 - ë¬¸ì„œ ê´€ë¦¬ ì „ëµ ìˆ˜ë¦½*
